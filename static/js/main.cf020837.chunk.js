(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{175:function(e,t,n){},176:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(25),a=n.n(s),o=(n(175),n(176),n(24)),i=(n(177),n(26)),u=n(153),l=n.n(u).a.create({baseURL:"https://jsonplaceholder.typicode.com/",withCredentials:!0}),d=function(){return l.get("users").then((function(e){return e.data}))},j=function(){return l.get("todos").then((function(e){return e.data}))},b=function(e,t){return l.patch("/todos/".concat(e),t).then((function(e){return e.data}))},f=function(e){return l.delete("/todos/".concat(e)).then((function(e){return e.data}))},p=function(e,t){return l.post("/todos/",{title:t,userId:e}).then((function(e){return e.data}))},O={allUsers:[],totalUsersCount:0},h=n(39),x=n(66),m=n(275),v=n(51),g=n(278),y=n(40),T=n(281),k=n(282),w=n(277),E=n(279),S=n(276),A=n(58),C=n.n(A),U=n(93),_=n(165),D={allTodos:[]},L=function(e){return{type:"GET_ALL_TODO",todos:e}},I=function(e){return{type:"DELETE_TASK",id:e}},F=function(e,t){return{type:"UPDATE_TASK",id:e,payload:t}},K=function(e){return{type:"ADD_NEW_TASK",task:e}},N=function(e,t){return function(){var n=Object(U.a)(C.a.mark((function n(r){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b(e,t);case 3:n.sent,r(F(e,t)),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0.response?new Error(n.t0.response.data.error):new Error(n.t0.message+", more details in the console");case 10:return n.prev=10,console.log("\u041d\u0435\u043a\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430"),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},P=n(280),G=n(10),H=c.a.memo((function(e){var t=e.task,n=Object(r.useState)(""),c=Object(x.a)(n,2),s=c[0],a=c[1],o=Object(r.useState)(0),u=Object(x.a)(o,2),l=u[0],d=u[1],j=Object(h.b)(),b=t.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{key:e.id})})),p=Object(r.useState)(!1),O=Object(x.a)(p,2),m=O[0],v=O[1],g=function(){v(!1),j(N(l,{title:s})),a("")},T=function(){a(""),v(!1)},k=[{title:"Task",key:"title",sorter:function(e,t){return e.title>t.title?1:-1},render:function(e){var n,r;return Object(G.jsxs)(G.Fragment,{children:[e.title,Object(G.jsxs)(w.a,{destroyOnClose:!0,mask:!1,title:"Change Task Title",visible:m,onOk:g,onCancel:T,children:[Object(G.jsxs)("p",{children:["Task id: ",l]}),Object(G.jsx)("p",{children:null===(n=t[t.findIndex((function(e){return e.id===l}))])||void 0===n?void 0:n.title}),Object(G.jsx)("input",{placeholder:"type task text",onChange:function(e){return a(e.currentTarget.value)},value:s})]}),Object(G.jsx)(y.a,{type:"primary",onClick:(r=e.id,function(){d(r),v(!0)}),style:{padding:"5px",margin:"5px"},children:Object(G.jsx)(P.a,{})})]})}},{title:"Status",key:"completed",render:function(e){return Object(G.jsx)(E.a,{style:{cursor:"pointer"},color:e.completed?"green":"red",onClick:function(){return j(N(e.id,{completed:!e.completed}))},children:e.completed.toString().toUpperCase()})}},{title:"Actions",key:"id",render:function(e){e.id;return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(y.a,{danger:!0,onClick:function(){j(function(e){return function(){var t=Object(U.a)(C.a.mark((function t(n){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e);case 3:r=t.sent,console.log(r),n(I(e)),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),t.t0.response?new Error(t.t0.response.data.error):new Error(t.t0.message+", more details in the console");case 11:return t.prev=11,console.log("\u041d\u0435\u043a\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430"),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}(e.id))},children:" Delete "})})}}];return Object(G.jsx)(S.a,{dataSource:b,columns:k})})),R=function(e){var t,n=e.userId,c=(Object(o.g)(),Object(h.c)((function(e){return e.todos}))),s=Object(h.b)();return Object(r.useEffect)((function(){s(function(){var e=Object(U.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:n=e.sent,t(L(n)),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response?new Error(e.t0.response.data.error):new Error(e.t0.message+", more details in the console");case 10:return e.prev=10,console.log("\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u0440\u0443\u0442\u0438\u043b\u043a\u0443"),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}())}),[n]),t=Object(r.useMemo)((function(){return c.allTodos.filter((function(e){return e.userId===n}))}),[n,c]),Object(G.jsxs)("div",{children:["User id: ",n,Object(G.jsx)(H,{task:t})]})},W=m.a.Header,B=m.a.Content,J=m.a.Footer,M=m.a.Sider,z=v.a.SubMenu,q=function(e){var t=Object(r.useState)(!1),n=Object(x.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)({username:"User",id:0}),u=Object(x.a)(a,2),l=u[0],d=u[1],j=Object(r.useState)(""),b=Object(x.a)(j,2),f=b[0],O=b[1],w=Object(o.f)(),E=Object(h.b)();Object(r.useEffect)((function(){0===l.id?w.replace(""):w.push("/users/".concat(l.id.toString()))}),[w,l]);var S=e.users.map((function(e){return Object(G.jsxs)(v.a.Item,{onClick:function(){return function(e){d(Object(i.a)({},e))}(e)},children:[e.username+" \n "," - id: ",e.id]},e.id)}));return Object(G.jsxs)(m.a,{style:{minHeight:"100vh"},children:[Object(G.jsxs)(M,{collapsedWidth:70,width:240,collapsible:!0,collapsed:c,onCollapse:function(){s((function(e){return!e}))},children:[Object(G.jsx)("div",{className:"logo"}),Object(G.jsx)(v.a,{theme:"light",defaultSelectedKeys:["1"],mode:"inline",children:Object(G.jsx)(z,{icon:Object(G.jsx)(T.a,{}),title:"User",children:S},"users")})]}),Object(G.jsxs)(m.a,{className:"site-layout",children:[Object(G.jsx)(W,{className:"site-layout-background",style:{padding:0},children:"TODOs APP"}),Object(G.jsxs)(B,{style:{margin:"0 16px"},children:[Object(G.jsxs)(g.a,{style:{margin:"16px 0"},children:[Object(G.jsx)(g.a.Item,{children:"Users"}),"User"===l.username?null:Object(G.jsxs)(G.Fragment,{children:["Add new task for ",l.username,Object(G.jsx)("input",{value:f,onChange:function(e){return O(e.currentTarget.value)}}),Object(G.jsx)(y.a,{onClick:function(){return E((e=l.id,t=f,function(){var n=Object(U.a)(C.a.mark((function n(r){var c;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p(e,t);case 3:c=n.sent,r(K(Object(i.a)(Object(i.a)({},c),{},{completed:!1}))),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0.response?new Error(n.t0.response.data.error):new Error(n.t0.message+", more details in the console");case 10:return n.prev=10,console.log("\u041d\u0435\u043a\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430"),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[0,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()));var e,t},type:"primary",shape:"circle",icon:Object(G.jsx)(k.a,{}),size:"small"})]})]}),Object(G.jsx)("div",{className:"site-layout-background",style:{padding:0,minHeight:550},children:Object(G.jsx)(o.c,{children:Object(G.jsx)(o.a,{path:"/users/:id?",render:function(){return Object(G.jsx)(R,{userId:l.id})}})})})]}),Object(G.jsx)(J,{style:{textAlign:"center"},children:"Users Todos experience with AntDesign 2021"})]})]})};var Q=function(){var e=Object(h.c)((function(e){return e.users.allUsers})),t=Object(h.b)();return Object(r.useEffect)((function(){t((function(e){d().then((function(t){e(function(e){return{type:"GET_ALL_USERS",users:e}}(t))})).catch((function(e){throw new Error(e)})).finally((function(){console.log("\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u0440\u0443\u0442\u0438\u043b\u043a\u0443")}))}))}),[]),Object(G.jsx)("div",{children:Object(G.jsx)(o.c,{children:Object(G.jsx)(o.a,{path:"/",render:function(){return Object(G.jsx)(q,{users:e})}})})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,283)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))},X=n(84),Y=n(121),Z=n(160),$=Object(Y.b)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_USERS":return Object(i.a)(Object(i.a)({},e),{},{allUsers:t.users,totalUsersCount:t.users.length});default:return e}},todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_TODO":return Object(i.a)(Object(i.a)({},e),{},{allTodos:t.todos});case"DELETE_TASK":return Object(i.a)(Object(i.a)({},e),{},{allTodos:e.allTodos.filter((function(e){return e.id!==t.id}))});case"UPDATE_TASK":return Object(i.a)(Object(i.a)({},e),{},{allTodos:e.allTodos.map((function(e){return e.id!==t.id?e:Object(i.a)(Object(i.a)({},e),t.payload)}))});case"ADD_NEW_TASK":var n=Object(_.a)(e.allTodos);return n.unshift(t.task),Object(i.a)(Object(i.a)({},e),{},{allTodos:n});default:return e}}}),ee=Object(Y.c)($,Object(Y.a)(Z.a));a.a.render(Object(G.jsx)(X.a,{children:Object(G.jsx)(h.a,{store:ee,children:Object(G.jsx)(Q,{})})}),document.getElementById("root")),window.store=ee,V()}},[[273,1,2]]]);
//# sourceMappingURL=main.cf020837.chunk.js.map